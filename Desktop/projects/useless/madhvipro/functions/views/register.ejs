<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>login</title>
      <!-- Font Awesome -->
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
      <!-- Google Fonts -->
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
      <!-- Bootstrap core CSS -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
      <!-- Material Design Bootstrap -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.13.0/css/mdb.min.css" rel="stylesheet">
      <link type="text/js" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js">
      <style>
         .font-roboto-1{
         font-family: 'Roboto', sans-serif;
         }
      </style>
       <style>
      /* Mark input boxes that gets an error on validation: */
         input.invalid {
            background-color: #ffdddd;
           }

          select.invalid {
          background-color: #ffdddd;
           }
           .tab {
           display: none;
         }
             .step {
            height: 15px;
            width: 15px;
            margin: 0 2px;
             background-color: #bbbbbb;
             border: none;  
             border-radius: 50%;
            display: inline-block;
           opacity: 0.5;
              }
           .step.active {
           opacity: 1;
             }
              .step.finish {
             background-color: #4CAF50;
            }
   </style>
   </head>
   <body>
      <!--Navbar -->
      <nav class="mb-1 navbar navbar-expand-lg navbar-dark ">
         <div class="container">
            <a class="navbar-brand" href="#"><img src="./images/logo.png" height="44"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-4"
               aria-controls="navbarSupportedContent-4" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
               <ul class="navbar-nav ml-auto">
                  <li class="nav-item ">
                     <a class="nav-link" href="#">
                        <!-- <i class="fab fa-facebook-f"></i> Facebook -->
                     </a>
                  </li>
               </ul>
            </div>
         </div>
      </nav>
      <!--/.Navbar -->
      <div class="container my-5">
         <div class="row">
            <div class="col-md"></div>
            <div class="col-md-11">
               <div class="card mb-5">
                  <div class="card-header text-center border-0 py-3">
                     <p class="m-0 text-muted ">Register</p>
                  </div>
                  <div class="card-body px-lg-5 pt-2">
                    <form id="regForm" method="post" action="/register" name="add" class="text-center" style="color: #757575;">

                        <div class="tab">
                         <p> Basic info</p>

                         <div class="my-2">
                       <% if (error) { %>
                       <div class="alert alert-warning alert-dismissible fade show">
                         <h6><%= error%></h6>     
                       </div>
                           <% } %>
                     </div>

                          <% if (data) {%>


                            <div class="md-form">
                           <input type="text" id="name" class="form-control" name="name" value="<%= data.name%>" required>
                           <label for="name">Name of hospital</label>
                        </div>

                                                <div class="md-form">
                           <input type="text" id="mname" class="form-control" name="mname" value="<%= data.mname%>" required>
                           <label for="mname">रुग्णालयाचे नाव</label>
                        </div>


                             <div class="md-form">
              
                           <select class="browser-default custom-select" name="type" required>
                              <option value="" selected disabled> Type of Hospital</option>
                              <option value="1">Goverment</option>
                              <option  value="2">Private</option>
                           </select>
                        </div>
                        <div class="md-form">
                           <input type="text" id="area" class="form-control" name="area" value="<%= data.area%>" required>
                           <label for="area">Address of hospital</label>
                        </div>

                        <div class="md-form">
                           <input type="text" id="marea" class="form-control" name="marea" value="<%= data.marea%>" required>
                           <label for="marea">रुग्णालयाचा पत्ता</label>
                        </div>


                        <div class="md-form">
                           <input type="number" id="beds" class="form-control" name="beds" value="<%= data.beds%>" required>
                           <label for="beds">No of bed</label>
                        </div>

                          <% } else { %>

                            <div class="md-form">
                           <input type="text" id="name" class="form-control" name="name" required>
                           <label for="name">Name of hospital</label>
                        </div>

                        <div class="md-form">
                           <input type="text" id="mname" class="form-control" name="mname" required>
                           <label for="mname">रुग्णालयाचे नाव</label>
                        </div>

                             <div class="md-form">
              
                           <select class="browser-default custom-select" name="type" required>
                              <option value="" selected disabled> Type of Hospital</option>
                              <option value="government">Goverment</option>
                              <option  value="private">Private</option>
                           </select>
                        </div>
                        <div class="md-form">
                           <input type="text" id="area" class="form-control" name="area" required>
                           <label for="area">Address of hospital</label>
                        </div>



                        <div class="md-form">
                           <input type="text" id="marea" class="form-control" name="marea"  required>
                           <label for="marea">रुग्णालयाचा पत्ता</label>
                        </div>


                        <div class="md-form">
                           <input type="number" id="beds" class="form-control" name="beds" required>
                           <label for="beds">No of beds</label>
                        </div>

                          <% } %>
                          </div>
                        <div class="tab">
                           <p> Login Info </p>

                           <div class="my-2">
                       <% if (error) { %>
                       <div class="alert alert-warning alert-dismissible fade show">
                         <h6><%= error%></h6>     
                       </div>
                           <% } %>
                     </div>

                               <div class="md-form">
                           <input type="text" id="id" class="form-control" name="id" required>
                           <label for="id">Enter ID</label>
                        </div>
                        
                           <div class="md-form ">
                              <input type="password" name="NPassword" class="form-control" id="txtNewPassword" required>
                              <label for="password">Password</label>
                           </div>
                           <div class="md-form ">
                              <input type="password" name="RNPassword" class="form-control" id="txtConfirmPassword" required>
                              <div id="divCheckPassword"></div>
                              <label for="password2">Confirm Password</label>
                           </div>
                             <span id='message'></span>

                      
                        </div>
                        <div style="overflow:auto;">
                           <div style="float:right;">
                              <button type="button" id="prevBtn" class="btn btn-primary" onclick="nextPrev(-1)">Previous</button>
                              <button type="button" id="nextBtn" class="btn btn-success" onclick="nextPrev(1)">Next</button>
                           </div>
                        </div>
                        <!-- Circles which indicates the steps of the form: -->
                        <div style="text-align:center;margin-top:40px;">
                           <span class="step"></span>
                           <span class="step"></span>
                        </div>
                     </form>
                  </div>
               </div>
            </div>
            <div class="col-md"></div>
         </div>
      </div>
      <!--Footer-->
      <footer class="page-footer text-center font-small text-muted fixed-bottom wow fadeIn">
         <!--Copyright-->
         <div class="footer-copyright py-3">
            © 2020 Copyright:
            <a href=""> helixstack.in </a>
         </div>
         <!--/.Copyright-->
      </footer>
      <!--/.Footer-->
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>
      <!-- JQuery -->
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <!-- Bootstrap tooltips -->
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
      <!-- Bootstrap core JavaScript -->
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
      <!-- MDB core JavaScript -->
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.13.0/js/mdb.min.js"></script>

       <script>


         var currentTab = 0; // Current tab is set to be the first tab (0)
         showTab(currentTab); // Display the current tab
         
         function showTab(n) {
           // This function will display the specified tab of the form...
           var x = document.getElementsByClassName("tab");
           x[n].style.display = "block";
           //... and fix the Previous/Next buttons:
           if (n == 0) {
             document.getElementById("prevBtn").style.display = "none";
           } else {
             document.getElementById("prevBtn").style.display = "inline";
           }
           if (n == (x.length - 1)) {

             document.getElementById("nextBtn").innerHTML = "Submit";

             // document.getElementById("nextBtn").onclick = "finalvalidation()";
           } else {
             document.getElementById("nextBtn").innerHTML = "Next";
           }
           //... and run a function that will display the correct step indicator:
           fixStepIndicator(n)
         }
         
         function nextPrev(n) {
           // This function will figure out which tab to display
           var x = document.getElementsByClassName("tab");
           // Exit the function if any field in the current tab is invalid:
           if (n == 1 && !validateForm()) return false;
           // Hide the current tab:
           x[currentTab].style.display = "none";
           // Increase or decrease the current tab by 1:
           currentTab = currentTab + n;
           // if you have reached the end of the form...
           if (currentTab >= x.length) {
             // ... the form gets submitted:
             console.log("submitting")
             if($('#txtNewPassword').val() == $('#txtConfirmPassword').val())
             {
             document.getElementById("regForm").submit();
             
           }
           
           }
           // Otherwise, display the correct tab:
           
           if (currentTab >= x.length)
           {
            currentTab -= n;
           }
           showTab(currentTab);
         }
         
         function validateForm() {
           // This function deals with validation of the form fields
           var x, y, i, valid = true;
           x = document.getElementsByClassName("tab");
           y = x[currentTab].getElementsByTagName("input");
           // A loop that checks every input field in the current tab:
           for (i = 0; i < y.length; i++) {
             // If a field is empty...
             if (y[i].value == "") {
               // add an "invalid" class to the field:
               y[i].className += " invalid";
               // and set the current valid status to false
               valid = false;
             }
           }

            y = x[currentTab].getElementsByTagName("select");
           // A loop that checks every input field in the current tab:
           for (i = 0; i < y.length; i++) {
             // If a field is empty...
             if (y[i].value == "") {
               // add an "invalid" class to the field:
               y[i].className += " invalid";
               // and set the current valid status to false
               valid = false;
             }
           }

           // If the valid status is true, mark the step as finished and valid:
           if (valid) {
             document.getElementsByClassName("step")[currentTab].className += " finish";
           }
           return valid; // return the valid status
         }
         
         function fixStepIndicator(n) {
           // This function removes the "active" class of all steps...
           var i, x = document.getElementsByClassName("step");
           for (i = 0; i < x.length; i++) {
             x[i].className = x[i].className.replace(" active", "");
           }
           //... and adds the "active" class on the current step:
           x[n].className += " active";
         }


$('#txtNewPassword, #txtConfirmPassword').on('keyup', function () {
  if ($('#txtNewPassword').val() == $('#txtConfirmPassword').val()) {
    if ($('#txtNewPassword').val() != ""){
       $('#message').html('Password matching').css('color', 'green');
    }
    else
    {
       $('#message').html('').css('color', 'green');
    }
   
  } else 
    $('#message').html('Password not Matching').css('color', 'red');
});
      </script>
      
      <script type="text/javascript">
         // Basic example
         $(document).ready(function() {
            $('#dtBasicExample').DataTable({
               "ordering": true // false to disable sorting (or any other option)
            });
            $('.dataTables_length').addClass('bs-select');
         });
      </script>
      <script type="text/javascript">
         // Wait for the DOM to be ready
         $(function() {
         
         $("form[name='add']").validate2({
         rules: {
         name: "required",
         beds: "required",
         area: "required",
         id: "required",
         password: {
                    minlength : 4
                },
         password2: {
         minlength : 4,
          equalTo : "#password"
         },
         },
         messages: {
         name: "Please enter name",
         beds: "Please enter no. of beds",
         area: "Please enter Address",
         id: "Please enter Id",
         password: {
         minlength: "Your password must have at least 4 character"
         },
         password2: {
         minlength: "Your password must have at least 4 character",
         equalTo: "Please enter password same as above"
         }
         }
         submitHandler: function(form) {
         form.submit();
         }
         });
         
         
         });
         
      </script>
   </body>
</html>